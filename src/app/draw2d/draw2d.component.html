<mat-toolbar>
  <mat-button-toggle-group #group="matButtonToggleGroup" name="action" value="crop_square" aria-label="Draw Tool" (change)="onDrawActionChange($event.value)">
    <mat-button-toggle value="crop_square">
      <mat-icon>view_compact</mat-icon>
    </mat-button-toggle>
    <mat-button-toggle value="select" aria-label="Text align left">
      <mat-icon>select_all</mat-icon>
    </mat-button-toggle>
    <mat-button-toggle value="split_rectangle_vertical" aria-label="Text align left">
      <mat-icon>vertical_split</mat-icon>
    </mat-button-toggle>
    <mat-button-toggle value="split_rectangle_horizontal" aria-label="Text align left">
      <mat-icon>horizontal_split</mat-icon>
    </mat-button-toggle>
    <mat-button-toggle value="move" aria-label="Text align left">
      <mat-icon>open_with</mat-icon>
    </mat-button-toggle>
  </mat-button-toggle-group>

  <div class="draw-action-buttons">
    <button mat-icon-button (click)="exportPlan()" title="Export as PNG">
      <mat-icon>save_alt</mat-icon>
    </button>

    <button mat-icon-button (click)="deleteSelectedElement()">
      <mat-icon>delete_forever</mat-icon>
    </button>
    <button mat-icon-button (click)="clearAllElements()">
      <mat-icon>clear_all</mat-icon>
    </button>
  </div>
</mat-toolbar>

<mat-sidenav-container>
  <mat-sidenav-content>
    <canvas #canvas class="canv"></canvas>
  </mat-sidenav-content>

  <mat-sidenav position="end" opened mode="side" id="property-size">
    @if (selectedElement) {
      <form class="property-form">
        <mat-form-field class="property-field" appearance="fill">
          <mat-label class="lbl">Width:</mat-label>
          <input matInput title="width" name="width" class="pos" type="number" [(ngModel)]="selectedElement.width" (keyup.enter)="onSelectedElementSizeChanged()" (blur)="onSelectedElementSizeChanged()">
        </mat-form-field>
        <mat-form-field class="property-field" appearance="fill">
          <mat-label class="lbl">Height:</mat-label>
          <input matInput title="height" name="height" class="pos" type="number" [(ngModel)]="selectedElement.height" (keyup.enter)="onSelectedElementSizeChanged()" (blur)="onSelectedElementSizeChanged()">
        </mat-form-field>
        <mat-form-field class="property-field" appearance="fill">
          <mat-label class="lbl">Type:</mat-label>
          <mat-select name="frontType" [(ngModel)]="selectedFrontTypes" (selectionChange)="selectFrontType($event)">
            @for (option of frontTypes; track option) {
              <mat-option [value]="option.value">{{option.viewValue}}</mat-option>
            }
          </mat-select>
        </mat-form-field>
      </form>
    }

    @if (selectedElementBody) {
      <form class="property-form">
        <mat-form-field class="property-field" appearance="fill">
          <mat-label class="lbl">Deepth:</mat-label>
          <input matInput title="deepth" name="deepth" class="pos" type="number" [(ngModel)]="selectedElementBody.deepth" (keyup.enter)="changeBodyDetails()" (blur)="changeBodyDetails()">
        </mat-form-field>
        <mat-form-field class="property-field" appearance="fill">
          <mat-label class="lbl">Material thickness:</mat-label>
          <input matInput title="thickness" name="thickness" class="pos" type="number" [(ngModel)]="selectedElementBody.thickness" (keyup.enter)="changeBodyDetails()" (blur)="changeBodyDetails()">
        </mat-form-field>

        <mat-form-field class="property-field" appearance="fill">
          <mat-label class="lbl">Material:</mat-label>
          <mat-select name="material" [(ngModel)]="selectedElementBody.material" (selectionChange)="changeBodyDetails()">
            <mat-option value="pine">Pine</mat-option>
            <mat-option value="oak">Oak</mat-option>
            <mat-option value="beech">Beech</mat-option>
            <mat-option value="walnut">Walnut</mat-option>
            <mat-option value="maple">Maple</mat-option>
            <mat-option value="white">White</mat-option>
            <mat-option value="antracite">Antracite</mat-option>
            <mat-option value="lightgray">Light Gray</mat-option>
            <mat-option value="black">Black</mat-option>
          </mat-select>
        </mat-form-field>
      </form>
    }

    @if (selectedElement) {
      <mat-divider style="margin: 10px 0;"></mat-divider>
      
      <div class="property-form">
        <h5 style="padding: 0 16px; margin-bottom: 8px; color: rgba(255,255,255,0.7); font-size: 14px;">Shelf generator</h5>
        
        <mat-form-field class="property-field" appearance="fill">
          <mat-label class="lbl">Number of shelves:</mat-label>
          <input matInput #shelfCountInput type="number" value="1" min="1" max="10">
        </mat-form-field>

        <button mat-raised-button color="primary" 
                style="margin: 8px 16px 24px 16px; height: 45px;"
                (click)="onGenerateShelves(shelfCountInput.value)">
          Generate Shelves
        </button>
      </div>
    }
  </mat-sidenav>
</mat-sidenav-container>